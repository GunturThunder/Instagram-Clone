if (self.CavalryLogger) { CavalryLogger.start_js(["H5ytv"]); }

__d("MPresenceIcon",["DOM","MLegacyDataStore","MRequest","MURI","Stratcom","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){var g=1,h=2,i;function j(){var a=b("DOM").scry(document.body,"i","presence-icon"),c=[];for(var d=0,e=a.length;d<e;++d){var f=b("MLegacyDataStore").get(a[d]);f.userid&&!c[f.userid]&&(c[f.userid]=1)}f=new(b("MURI"))("/chat/presence_icon.php").toString();d=new(b("MRequest"))(f).setData({ids:Object.keys(c)}).setIgnoreErrors(!0);d.listen("done",function(e){for(var c=0,d=a.length;c<d;++c){var f=b("MLegacyDataStore").get(a[c]);f&&f.userid&&b("Stratcom").hasSigil(a[c],"online-icon")&&e[f.userid]==g||b("Stratcom").hasSigil(a[c],"mobile-icon")&&e[f.userid]==h?b("DOM").show(a[c]):b("DOM").hide(a[c])}});d.listen("finally",function(a){clearTimeout(i),i=b("setTimeoutAcrossTransitions")(j,6e4)});d.send()}j()}),null);
__d("MBrowserTheme",["MHeadMeta"],(function(a,b,c,d,e,f){"use strict";f.set=a;f.restore=c;var g=null,h=!1,i=null;function j(){if(g)return g;g=b("MHeadMeta").getByName("theme-color");return g}function a(a){var b=j();b&&(i===null&&!h&&(i=b.getAttribute("content")),i!==null&&(b.setAttribute("content",a),h=!0))}function c(){if(!h)return;var a=j();if(!a)return;i!==null&&(a.setAttribute("content",i),h=!1)}}),null);
__d("MPhotoViewportTracking",["Banzai","DOM","FBJSON","MViewportTracking","StratcomManager"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.init=function(a){b("StratcomManager").enableDispatch(document,"scroll"),new c().init(a)};var d=c.prototype;d.getDataFromConfig=function(a){this.relaxedMinSize=!0};d.__getStreamRoot=function(){this.$MPhotoViewportTracking1||(this.$MPhotoViewportTracking1=document.getElementById("root"));return this.$MPhotoViewportTracking1};d.getAllStories=function(){return b("DOM").scry(this.__getStreamRoot(),"div","photo-stage")};d.getStoryID=function(a){var c=a.getAttribute("data-store");if(typeof c==="string"&&c.length>0){c=b("FBJSON").parse(c);if("object_id"in c)return""+c.object_id}return a.getAttribute("id")};d.getTimeout=function(){return 250};d.getDataToLog=function(a){a=this.getStoryID(a);return{photo_id:a}};d.getTimetrackingDataToLog=function(b){var c=a.prototype.getTimetrackingDataToLog.call(this,b);b=this.getStoryID(b.story);return babelHelpers["extends"]({},c,{photo_id:b})};d.sendDataToLog=function(a){b("Banzai").post("mphotos_vpv_tracking",a)};return c}(b("MViewportTracking"));e.exports=a}),null);
__d("MFullSizeLink",["EventListener","gkx","goURI"],(function(a,b,c,d,e,f){"use strict";f.registerFullSizePhotoLink=a;var g="data-full-size-href";function a(a){a=a.querySelector("["+g+"]");if(a){var c=a.getAttribute(g);c&&b("EventListener").listen(a,"click",function(){b("gkx")("676816")&&b("goURI")(c)})}}}),null);
__d("MInputFocus",["DOM","MViewport","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){a={scrollTo:function(a,c){b("setTimeoutAcrossTransitions")(function(){b("DOM").hide(a),b("MViewport").scrollTo(0,c),b("DOM").show(a),a.setSelectionRange(a.selectionEnd,a.selectionEnd)},0)}};e.exports=a}),null);
__d("MSinglePhotoDarkView",["cx","CSS","Event","MBrowserTheme","MViewport","destroyOnUnload"],(function(a,b,c,d,e,f,g){a={init:function(){b("MViewport").toggleHeader(!1);var a=document.getElementById("MChromeHeader");a&&b("CSS").addClass(a,"_8ih-");b("MBrowserTheme").set("black");b("destroyOnUnload")(function(){b("MViewport").toggleHeader(!0),a&&b("CSS").removeClass(a,"_8ih-"),b("MBrowserTheme").restore()})},closeButtonEventListener:function(a){var c=this,d=b("Event").listen(a,"click",function(){c.navBack()});b("destroyOnUnload")(function(){d.remove()})},navBack:function(){if(history.length<=1){window.close();return}history.go(-1)}};e.exports=a}),null);
__d("prefetchImage",[],(function(a,b,c,d,e,f){e.exports=a;function a(a,b){var c=!0,d=new Image();d.onload=function(){c=!1,b&&b()};d.src=a;return{cancel:function(){if(!c)return;c=!1;d.onload=null;d.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}}}}),null);
__d("MPhotoStage",["cx","CSS","DOM","MInputFocus","MJSEnvironment","MLegacyDataStore","MRequest","MSinglePhotoDarkView","MURI","MViewport","Stratcom","Vector","prefetchImage","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=!1,i="photo-stage",j="photo-image",k="facebox",l="new-tag-placeholder",m="photos-input-tag",n="photo-tag-loading",o="popup-nub",p="tokenizer-input",q="transfer-focus-container",r=2e3,s=200,t=null,u=null,v=null,w=null,x=!1;function y(a,c,d){var e=0,f=b("MViewport").getUseableWidth();d>f?e=d-f:c<0&&(e=c);return e===0?a:new(b("Vector"))(a.x-e,a.y)}function z(a){if(!a)return;b("CSS").conditionClass(a,"_57-n",!!v);v?(clearTimeout(v),v=null):v=b("setTimeoutAcrossTransitions")(function(){z(a)},r)}function A(){t=null;while(w.length)w.pop().remove();h=!1;v&&(clearTimeout(v),v=null)}function B(a){var c,d=(c=b("Vector")).getPos(a);a=c.getDim(a);var e=c.getPos(t);c=new c(d.x+a.x/2,d.y+a.x-e.y);d=b("DOM").find(t,"*",n);c.setPos(d);b("DOM").show(d)}function C(a,c,d){var e=new(b("MURI"))(a.write_tag_uri);e.addQueryData("id",a.owner_id);e.addQueryData("facebox_id",c.facebox_id);e.addQueryData("replace_id",l);e.addQueryData("sd_source",a.source);e.addQueryData("sd_set",a.set);a={};a["ids["+d+"]"]=d;a["x["+d+"]"]=c.facebox_center.x;a["y["+d+"]"]=c.facebox_center.y;d=new(b("MRequest"))(e.normalize().toString()).addData(a);return d}function D(a,c){var d;u=a;var e=b("DOM").find(t,"*",m),f=(d=b("Vector")).getPos(t),g=d.getPos(a);a=d.getDim(a);d=new d(g.x+a.x/2,g.y+a.y-f.y);a=y(d,d.x-s/2,d.x+s/2);f=b("DOM").find(e,"*",o);f.style.left=d.x-a.x+"px";f=b("MLegacyDataStore").get(u);f.suggestions&&(c.tokenizer.updateSuggestionsIds&&c.tokenizer.updateSuggestionsIds(f.suggestions));a.setPos(e);b("DOM").show(e);d=b("DOM").find(e,"*",p);d.focus();b("MInputFocus").scrollTo(d,g.y);v&&(clearTimeout(v),v=null)}function E(a){var c=b("DOM").find(t,"*",m);if(u){var d=b("MLegacyDataStore").get(u),e=b("MLegacyDataStore").get(t);e=C(e,d,a);B(u);e.listen("finally",function(){x&&b("MSinglePhotoDarkView").navBack();var a=b("DOM").find(t,"*",n);b("DOM").hide(a)});e.send();b("DOM").hide(u);b("DOM").hide(c);b("DOM").find(c,"*",p).blur();u=null}v=b("setTimeoutAcrossTransitions")(function(){z(t)},r)}a=function(a,c,d){if(h)return;x=d;t=a;h=!0;d="touchend";b("MJSEnvironment").IS_ANDROID&&(d="click");if(c&&c.use_faceboxes){w=[(a=b("Stratcom")).listen(d,i,function(a){if(u){var c=b("DOM").find(t,"*",m);b("DOM").find(c,"*",p).blur();b("DOM").hide(c);u=null;a.kill()}else z(a.getNode(i))}),a.listen(d,k,function(a){var c=b("DOM").find(t,"*",q),d=a.getNode(k);x?u=d:D(d,c);a.kill()}),a.listen(d,q,function(a){var c=a.getNode(q);c=b("DOM").find(c,"*",p);c.focus();u&&b("MInputFocus").scrollTo(c,b("Vector").getPos(u).y);a.kill()}),a.listen("Tokenizer-addedtoken",null,function(a){E(a.getData().rel)}),a.listen("close-on-tag",null,function(a){E(a.getData())})]}else w=[b("Stratcom").listen("touchend",i,function(a){z(a.getNode(i))})];w.push(b("Stratcom").listen("m:page:unload",null,A));c=b("DOM").scry(t,"*",j);c.length>0&&b("MLegacyDataStore").get(c[0]).imgsrc?b("prefetchImage")(b("MLegacyDataStore").get(c[0]).imgsrc,function(){return z(t)}):z(t)};f.main=a}),null);
__d("MRapidReportingHelper",["DOM","MModalDialog","Stratcom"],(function(a,b,c,d,e,f){f.initDoneButtonDialog=a;f.initMoreLink=c;f.initDoneButtonMLite=d;f.startFlytrap=e;function a(){b("Stratcom").listen("click","rr_done_sigil",function(){b("MModalDialog").close({canceled:!0,goBack:!1})})}function c(){b("Stratcom").listen("click","more-link-photo-viewer",function(){b("Stratcom").removeCurrentListener()})}function d(){var a=document.getElementById("rapid_report_confirm_done_button");a!==null&&b("DOM").show(a);b("Stratcom").listen("click","rr_done_sigil_mlite",function(){window.mliteFrxJSInterface!=null&&window.mliteFrxJSInterface.onMLiteFRXFlowNav!=null?window.mliteFrxJSInterface.onMLiteFRXFlowNav("frx_flow_close"):window.webkit!=null&&window.webkit.messageHandlers!=null&&window.webkit.messageHandlers.mliteFrxMessageHandler!=null&&window.webkit.messageHandlers.mliteFrxMessageHandler.postMessage("frx_flow_close")})}function e(){window.mliteFrxJSInterface!=null&&window.mliteFrxJSInterface.onMLiteFRXFlowNav!=null&&window.mliteFrxJSInterface.onMLiteFRXFlowNav("flytrap_flow_start")}}),null);
__d("MImagePreloader",[],(function(a,b,c,d,e,f){function a(a){for(var b=0;b<a.length;b++){var c=new Image();c.src=a[b]}}f.init=a}),null);
__d("MTimestamp",["fbt","DOM","MLegacyDataStore","Stratcom","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=2e4,i=60,j=3600,k;function l(){var a=Math.floor(Date.now()/1e3),c=b("DOM").scry(document,"abbr","timestamp");for(var d=0,e=c.length;d<e;++d){var f=b("MLegacyDataStore").get(c[d]);f=m(a-f.time||0,f["short"],f.forceseconds);f&&(c[d].innerText=f)}clearTimeout(k);k=b("setTimeoutAcrossTransitions")(l,h)}function m(a,b,c){if(a>12*j)return null;if(a<2*i&&c)return g._({"*":"{number} seconds ago"},[g._param("number",a,[0])]);if(a<2*i)return g._("Just now");if(a<j){c=Math.floor(a/i);return b?g._({"*":"{number} min"},[g._param("number",c,[0])]):g._({"*":"{number} minutes ago"},[g._param("number",c,[0])])}c=Math.floor(a/j);if(b)return g._("{number} hr",[g._param("number",c)]);else if(c==1)return g._("1 hour ago");return g._({"*":"{number} hours ago"},[g._param("number",c,[0])])}l();b("Stratcom").listen("m:update-timestamps",null,function(){l()});f.renderTimestamp=m}),null);